<?xml version="1.0" encoding="utf-8" ?>

<Patch>

<Operation Class="PatchOperationAdd">
	<xpath>/Defs/ThingDef[@Name="MealBase"]/ingestible</xpath>
	<value>
		<chairSearchRadius>36</chairSearchRadius>
	</value>
</Operation>

<Operation Class="PatchOperationAdd">
	<xpath>/Defs/ThingDef[@Name="OrganicProductBase"]</xpath>
	<value>
		<ingestible>
			<chairSearchRadius>36</chairSearchRadius>
		</ingestible>
	</value>
</Operation> 

<Operation Class="PatchOperationReplace">
	<xpath>*/RecipeDef[defName = "BulkExtractMetalFromSlag"]/products</xpath>
	<value>
		<products>
			<Steel>75</Steel>
		</products>
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>*/HediffGiverSetDef[defName = "OrganicStandard"]/hediffGivers/li[@Class = "HediffGiver_Birthday" and hediff="Frail"]/partsToAffect</xpath>
	<value>
		<partsToAffect>
          	<li>Spine</li>
        </partsToAffect>
	</value>
</Operation>

<Operation Class="PatchOperationAdd">
    <xpath>/Defs/ThingDef[@Name = "BuildingBase"]</xpath>
    <value>
        <resourcesFractionWhenDeconstructed>0.90</resourcesFractionWhenDeconstructed>
    </value>
</Operation>

<Operation Class="PatchOperationReplace">
    <xpath>/Defs/StorytellerDef[defName = "Cassandra"]/populationIntentFromPopCurve</xpath>
    <value>
        <populationIntentFromPopCurve>
			<points>
				<li>0, 4</li>
				<li>1, 2</li>
				<li>5, 0.5</li>
				<li>9, 0</li>
				<li>14, -2</li>
				<li>17, -5</li>
				<!-- Defaults: 				
				<li>0, 8</li>
				<li>1, 4</li>
				<li>5, 1</li>
				<li>9, 0.5</li>
				<li>13, 0</li>
				<li>18, -1</li> 
				-->
			</points>
		</populationIntentFromPopCurve>
    </value>
</Operation>

<Operation Class="PatchOperationReplace">
    <xpath>/Defs/StorytellerDef[defName = "Randy"]/populationIntentFromPopCurve</xpath>
    <value>
        <populationIntentFromPopCurve>
			<points>
				<li>0, 5</li>
				<li>1, 3</li>
				<li>5, 1</li>
				<li>9, 0.5</li>
				<li>13, -0.5</li>
				<li>33, -5</li>
				<!-- Defaults:
				<li>0, 8</li>
				<li>1, 4</li>
				<li>5, 1</li>
				<li>9, 0.5</li>
				<li>13, 0</li>
				<li>50, -1</li>
				-->
			</points>
		</populationIntentFromPopCurve>
    </value>
</Operation>

<!-- <Operation Class="PatchOperationReplace">
	<xpath>/Defs/ThingDef[defName="Human"]/statBases/MoveSpeed</xpath>
	<value>
		<MoveSpeed>4.61</MoveSpeed>
	</value>
</Operation> -->

<Operation Class="PatchOperationReplace">
	<xpath>/Defs/ThingDef[defName="Caribou"]/statBases/MoveSpeed</xpath>
	<value>
		<MoveSpeed>5.94</MoveSpeed> <!-- Default 4.84 -->
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>/Defs/StatDef[defName="CarryingCapacity"]/defaultBaseValue</xpath>
	<value>
		<defaultBaseValue>500</defaultBaseValue> <!-- Default 75 -->
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>/Defs/StatDef[defName="MedicalSurgerySuccessChance" or defName="ConstructSuccessChance" or defName="ConstructionSpeed" or defName="MiningSpeed"]/capacityFactors/li[capacity="Sight"]/max</xpath>
	<value>
		<max>1.5</max> <!-- Default 1 -->
	</value>
</Operation>

<Operation Class="PatchOperationSequence">
	<success>Always</success>
	<operations>
		<li Class="ModCheck.isModLoaded">
			<modName>Megafauna</modName>
			<yourMod>DacTweaks</yourMod>
			<customMessageSuccess>[DacTweaks] Megafauna detected. Patching Megafauna manhunterOnTameFailChance</customMessageSuccess>
		</li>
		<li Class="ModCheck.loadOrder">
			<modName>Megafauna</modName>
			<yourMod>DacTweaks</yourMod>
			<errorOnFail>true</errorOnFail>
			<yourModFirst>false</yourModFirst>
			<customMessageFail>[DacTweaks] Megafauna must be loaded before DacTweaks</customMessageFail>
		</li>
		<li Class="PatchOperationReplace">
			<xpath>/Defs/ThingDef[defName="Titanis"]/race/manhunterOnTameFailChance</xpath>
			<value>
				<manhunterOnTameFailChance>0.05</manhunterOnTameFailChance> <!-- Default 0.2 -->
			</value>
		</li>
		<li Class="PatchOperationReplace">
			<xpath>/Defs/ThingDef[defName="Entelodont"]/race/manhunterOnTameFailChance</xpath>
			<value>
				<manhunterOnTameFailChance>0.04</manhunterOnTameFailChance> <!-- Default 0.1 -->
			</value>
		</li>
		<li Class="PatchOperationReplace">
			<xpath>/Defs/ThingDef[defName="Paraceratherium"]/race/baseHungerRate</xpath>
			<value>
				<baseHungerRate>2.6</baseHungerRate> <!-- Default 3.5 -->
			</value>
		</li>
	</operations>
</Operation>

<!-- <Operation Class="PatchOperationRemove">
	<xpath>/Defs/RecipeDef[defName="MakeChemfuelFromOrganics"]/ingredients/li/filter/exceptedThingDefs</xpath>
</Operation>

<Operation Class="PatchOperationRemove">
	<xpath>/Defs/RecipeDef[defName="MakeChemfuelFromOrganics"]/fixedIngredientFilter/exceptedThingDefs</xpath>
</Operation> -->

<Operation Class="PatchOperationSequence">
	<success>Always</success>
	<operations>
		<li Class="ModCheck.isModLoaded">
			<modName>VGP Garden Tools</modName>
			<yourMod>DacTweaks</yourMod>
			<customMessageSuccess>[DacTweaks] VGP Garden Tools detected. Patching VGP Garden Tools to allow compost from AnimalFeed</customMessageSuccess>
		</li>
		<li Class="ModCheck.loadOrder">
			<modName>VGP Garden Tools</modName>
			<yourMod>DacTweaks</yourMod>
			<errorOnFail>true</errorOnFail>
			<yourModFirst>false</yourModFirst>
			<customMessageFail>[DacTweaks] VGP Garden Tools must be loaded before DacTweaks</customMessageFail>
		</li>
		<li Class="PatchOperationReplace">
			<xpath>/Defs/RecipeDef[defName="MakeCompostStarter"]/ingredients/li[2]/filter/categories</xpath>
			<value>
				<categories>
			        <li>FoodRaw</li>
			        <li>AnimalFeed</li>
				</categories>
			</value>
		</li>
		<li Class="PatchOperationReplace">
			<xpath>/Defs/RecipeDef[defName="MakeCompostStarter"]/fixedIngredientFilter/categories</xpath>
			<value>
				<categories>
			        <li>FoodRaw</li>
			        <li>AnimalFeed</li>
				</categories>
			</value>
		</li>
	</operations>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>Defs/ThingDef[defName = "Thrumbo"]/race/wildness</xpath>
	<value>
		<wildness>0.9</wildness>
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>Defs/ThingDef[defName = "Megasloth"]/race/wildness</xpath>
	<value>
		<wildness>0.86</wildness> <!-- Default 0.97 -->
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>Defs/ThingDef[defName="Megasloth" and @ParentName="AnimalThingBase"]/race/baseBodySize</xpath>
	<value>
		<baseBodySize>4.6</baseBodySize> <!-- Default 4.0 -->
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>Defs/ThingDef[defName="Megasloth" and @ParentName="AnimalThingBase"]/race/baseHungerRate</xpath>
	<value>
		<baseHungerRate>1.4</baseHungerRate> <!-- Default 2.0 -->
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>Defs/ThingDef[defName = "Ostrich"]/race/wildness</xpath>
	<value>
		<wildness>0.89</wildness> <!-- Default 0.95 -->
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>Defs/ThingDef[defName="Muffalo" and @ParentName="AnimalThingBase"]/race/baseBodySize</xpath>
	<value>
		<baseBodySize>4.0</baseBodySize> <!-- Default 2.1 -->
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>*/DifficultyDef[defName = "Easy"]/threatScale</xpath>
	<value>
	<threatScale>0.3</threatScale>
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>*/DifficultyDef[defName = "Medium"]/threatScale</xpath>
	<value>
	<threatScale>0.55</threatScale>
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>Defs/ThingDef[@Name="BaseArtilleryBuilding"]/building/turretBurstCooldownTime</xpath>
	<value>
		<turretBurstCooldownTime>20</turretBurstCooldownTime> <!-- Default 28 -->
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>Defs/ThingDef[@Name="BaseArtilleryBuilding"]/building/turretBurstWarmupTime</xpath>
	<value>
		<turretBurstWarmupTime>2.6</turretBurstWarmupTime> <!-- Default 4 -->
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>Defs/ThingDef[defName="Artillery_Mortar"]/verbs/li/forcedMissRadius</xpath>
	<value>
		<forcedMissRadius>6.2</forcedMissRadius> <!-- Default 11 -->
	</value>
</Operation>

<Operation Class="PatchOperationSequence">
	<success>Always</success>
	<operations>
		<li Class="ModCheck.isModLoaded">
			<modName>Harvest Organs Post Mortem - 2.0 [B18]</modName>
			<yourMod>DacTweaks</yourMod>
			<customMessageSuccess>[DacTweaks] Harvest Organs Post Mortem - 2.0 [B18] detected.</customMessageSuccess>
		</li>
		<li Class="ModCheck.loadOrder">
			<modName>Harvest Organs Post Mortem - 2.0 [B18]</modName>
			<yourMod>DacTweaks</yourMod>
			<errorOnFail>true</errorOnFail>
			<yourModFirst>false</yourModFirst>
			<customMessageFail>[DacTweaks] Harvest Organs Post Mortem - 2.0 [B18] must be loaded before DacTweaks</customMessageFail>
		</li>
		<li Class="PatchOperationReplace">
			<xpath>/Defs/ThoughtDef[defName="ButcheredHumanlikeCorpse"]/stages/li/baseMoodEffect</xpath>
			<value>
				<baseMoodEffect>-2</baseMoodEffect>
			</value>
		</li>
	</operations>
</Operation>

<Operation Class="PatchOperationSequence">
	<success>Always</success>
	<operations>
		<li Class="ModCheck.isModLoaded">
			<modName>Rimsenal - Enhanced Vanilla Pack</modName>
			<yourMod>DacTweaks</yourMod>
			<customMessageSuccess>[DacTweaks] Rimsenal - Enhanced Vanilla Pack detected.</customMessageSuccess>
		</li>
		<li Class="ModCheck.loadOrder">
			<modName>Rimsenal - Enhanced Vanilla Pack</modName>
			<yourMod>DacTweaks</yourMod>
			<errorOnFail>true</errorOnFail>
			<yourModFirst>false</yourModFirst>
			<customMessageFail>[DacTweaks] Rimsenal - Enhanced Vanilla Pack must be loaded before DacTweaks</customMessageFail>
		</li>
		<li Class="PatchOperationReplace">
			<xpath>*/ThingDef[defName="Gun_Blowgun"]/verbs/li/range</xpath>
			<value>
				<range>16</range>
			</value>
		</li>
		<li Class="PatchOperationReplace">
			<xpath>*/ThingDef[defName="Gun_Blowgun"]/statBases</xpath>
			<value>
				<statBases>
					<WorkToMake>20000</WorkToMake>
					<Mass>0.5</Mass>
					<AccuracyTouch>0.72</AccuracyTouch>
					<AccuracyShort>0.64</AccuracyShort>
					<AccuracyMedium>0.30</AccuracyMedium>
					<AccuracyLong>0.12</AccuracyLong>
					<RangedWeapon_Cooldown>1.9</RangedWeapon_Cooldown>
					<Weapon_Bulk>0.5</Weapon_Bulk>
				</statBases>
			</value>
		</li>
		<li Class="PatchOperationReplace">
			<xpath>*/ThingDef[defName="Gun_Blowgun"]/costList</xpath>
			<value>
				<costList>
					<HerbalMedicine>15</HerbalMedicine>
					<WoodLog>30</WoodLog>
				</costList>
			</value>
		</li>
	</operations>
</Operation>

<Operation Class="PatchOperationSequence">
	<success>Always</success>
	<operations>
		<li Class="ModCheck.isModLoaded">
			<modName>Rimsenal - Enhanced Vanilla Pack</modName>
			<yourMod>DacTweaks</yourMod>
			<customMessageSuccess>[DacTweaks] Rimsenal - Enhanced Vanilla Pack detected.</customMessageSuccess>
		</li>
		<li Class="ModCheck.loadOrder">
			<modName>Rimsenal - Enhanced Vanilla Pack</modName>
			<yourMod>DacTweaks</yourMod>
			<errorOnFail>true</errorOnFail>
			<yourModFirst>false</yourModFirst>
			<customMessageFail>[DacTweaks] Rimsenal - Enhanced Vanilla Pack must be loaded before DacTweaks</customMessageFail>
		</li>
		<li Class="PatchOperationReplace">
			<xpath>//ThingDef[defName="Gun_RSAMRifle"]/statBases</xpath>
			<value>
			<statBases>
				<WorkToMake>59000</WorkToMake>
				<Mass>10</Mass>
				<AccuracyTouch>0.45</AccuracyTouch>
				<AccuracyShort>0.66</AccuracyShort>
				<AccuracyMedium>0.82</AccuracyMedium>
				<AccuracyLong>0.91</AccuracyLong>
				<RangedWeapon_Cooldown>4</RangedWeapon_Cooldown>
				<Weapon_Bulk>3</Weapon_Bulk>
				</statBases>
			</value>
		</li>
		<li Class="PatchOperationRemove">
			<xpath>//ThingDef[defName="Gun_RSAMRifle"]/equippedStatOffsets</xpath>
		</li>
	</operations>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>Defs/ThoughtDef[defName="SleepDisturbed"]/durationDays</xpath>
	<value>
		<durationDays>0.25</durationDays> <!-- Default 0.5 -->
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>Defs/ThoughtDef[defName="SleepDisturbed"]/stages</xpath>
	<value>
		<stages>
			<li>
				<label>disturbed sleep</label>
				<description>I was disturbed during sleep by people moving around nearby. A private room would solve this.</description>
				<baseMoodEffect>-2</baseMoodEffect>
			</li>
		</stages>
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>Defs/ThingDef[defName="sd_luciprod_mechanite_oil"]/statBases/MarketValue</xpath>
	<value>
		<MarketValue>100</MarketValue>
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>Defs/ThingDef[defName="Luciferium"]/statBases/MarketValue</xpath>
	<value>
		<MarketValue>240</MarketValue>
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>Defs/RecipeDef[defName="sd_luciprod_extract_mechanites_scyther"]/products/sd_luciprod_mechanite_oil</xpath>
	<value>
		<sd_luciprod_mechanite_oil>10</sd_luciprod_mechanite_oil>
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>Defs/RecipeDef[defName="sd_luciprod_extract_mechanites_centipede"]/products/sd_luciprod_mechanite_oil</xpath>
	<value>
		<sd_luciprod_mechanite_oil>18</sd_luciprod_mechanite_oil>
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>/Defs/ThoughtDef[defName="AteWithoutTable"]/stages/li/baseMoodEffect</xpath>
	<value>
		<baseMoodEffect>-1</baseMoodEffect>
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>/Defs/ThoughtDef[defName="AteWithoutTable"]/durationDays</xpath>
	<value>
		<durationDays>0.25</durationDays>
	</value>
</Operation>

<Operation Class="PatchOperationAdd">
	<xpath>/Defs/ThingDef[defName="Fruitdrink"]/ingestible</xpath>
	<value>
		<nutrition>0.1</nutrition>
	</value>
</Operation>

<Operation Class="PatchOperationAdd">
	<xpath>/Defs/ThingDef[defName="Fruitdrink"]/ingestible</xpath>
	<value>
        <preferability>NeverForNutrition</preferability>
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>/Defs/ThingDef[defName="MoisturePump"]/comps/li[@Class="CompProperties_TerrainPumpDry"]/daysToRadius</xpath>
	<value>
        <daysToRadius>45</daysToRadius>
	</value>
</Operation>

<Operation Class="PatchOperationAdd">
	<xpath>/Defs/ThingDef[defName="ElectricCrematorium"]/comps/li[@Class="CompProperties_Power"]</xpath>
	<value>
        <shortCircuitInRain>false</shortCircuitInRain>
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>/Defs/RecipeDef[defName="MakeComponentx25"]/workAmount</xpath>
	<value>
        <workAmount>40000</workAmount>
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>/Defs/RecipeDef[defName="MakeComponentx10"]/workAmount</xpath>
	<value>
        <workAmount>20000</workAmount>
	</value>
</Operation>

<Operation Class="PatchOperationRemove">
	<xpath>/Defs/ThingDef[defName="Apparel_PowerArmor"]/equippedStatOffsets/WorkSpeedGlobal</xpath>
</Operation>

</Patch>
