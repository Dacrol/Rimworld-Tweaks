<?xml version="1.0" encoding="utf-8" ?>

<Patch>

<Operation Class="PatchOperationAdd">
	<xpath>/Defs/ThingDef[@Name="MealBase"]/ingestible</xpath>
	<value>
		<chairSearchRadius>50</chairSearchRadius>
	</value>
</Operation>

<Operation Class="PatchOperationAdd">
	<xpath>/Defs/ThingDef[@Name="OrganicProductBase"]</xpath>
	<value>
		<ingestible>
			<chairSearchRadius>50</chairSearchRadius>
		</ingestible>
	</value>
</Operation> 

<Operation Class="PatchOperationReplace">
	<xpath>*/RecipeDef[defName = "BulkExtractMetalFromSlag"]/products</xpath>
	<value>
		<products>
			<Steel>75</Steel>
		</products>
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>*/HediffGiverSetDef[defName = "OrganicStandard"]/hediffGivers/li[@Class = "HediffGiver_Birthday" and hediff="Frail"]/partsToAffect</xpath>
	<value>
		<partsToAffect>
          	<li>Spine</li>
        </partsToAffect>
	</value>
</Operation>

<Operation Class="PatchOperationAdd">
    <xpath>/Defs/ThingDef[@Name = "BuildingBase"]</xpath>
    <value>
        <resourcesFractionWhenDeconstructed>0.85</resourcesFractionWhenDeconstructed>
    </value>
</Operation>

<Operation Class="PatchOperationReplace">
    <xpath>/Defs/StorytellerDef[defName = "Cassandra"]/populationIntentFromPopCurve</xpath>
    <value>
        <populationIntentFromPopCurve>
			<points>
				<li>0, 8</li>
				<li>1, 4</li>
				<li>5, 0.9</li>
				<li>11, 0.6</li>
				<li>16, 0.1</li>
				<li>24, -1</li>
				<!-- Defaults: 				
				<li>0, 8</li>
				<li>1, 4</li>
				<li>5, 1</li>
				<li>9, 0.5</li>
				<li>13, 0</li>
				<li>18, -1</li> 
				-->
			</points>
		</populationIntentFromPopCurve>
    </value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>/Defs/ThingDef[defName="Human"]/statBases/MoveSpeed</xpath>
	<value>
		<MoveSpeed>5.11</MoveSpeed> <!-- Default 4.61 -->
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>/Defs/ThingDef[defName="Caribou"]/statBases/MoveSpeed</xpath>
	<value>
		<MoveSpeed>5.44</MoveSpeed> <!-- Default 4.84 -->
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>/Defs/StatDef[defName="CarryingCapacity"]/defaultBaseValue</xpath>
	<value>
		<defaultBaseValue>500</defaultBaseValue> <!-- Default 75 -->
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>/Defs/StatDef[defName="MedicalSurgerySuccessChance" or defName="ConstructSuccessChance" or defName="ConstructionSpeed" or defName="MiningSpeed"]/capacityFactors/li[capacity="Sight"]/max</xpath>
	<value>
		<max>1.5</max> <!-- Default 1 -->
	</value>
</Operation>

<Operation Class="PatchOperationSequence">
	<success>Always</success>
	<operations>
		<li Class="ModCheck.isModLoaded">
			<modName>Megafauna</modName>
			<yourMod>DacTweaks</yourMod>
			<customMessageSuccess>[DacTweaks] Megafauna detected. Patching Megafauna manhunterOnTameFailChance</customMessageSuccess>
		</li>
		<li Class="ModCheck.loadOrder">
			<modName>Megafauna</modName>
			<yourMod>DacTweaks</yourMod>
			<errorOnFail>true</errorOnFail>
			<yourModFirst>false</yourModFirst>
			<customMessageFail>[DacTweaks] Megafauna must be loaded before DacTweaks</customMessageFail>
		</li>
		<li Class="PatchOperationReplace">
			<xpath>/Defs/ThingDef[defName="Titanis"]/race/manhunterOnTameFailChance</xpath>
			<value>
				<manhunterOnTameFailChance>0.05</manhunterOnTameFailChance> <!-- Default 0.2 -->
			</value>
		</li>
		<li Class="PatchOperationReplace">
			<xpath>/Defs/ThingDef[defName="Entelodont"]/race/manhunterOnTameFailChance</xpath>
			<value>
				<manhunterOnTameFailChance>0.04</manhunterOnTameFailChance> <!-- Default 0.1 -->
			</value>
		</li>
	</operations>
</Operation>

<!-- <Operation Class="PatchOperationRemove">
	<xpath>/Defs/RecipeDef[defName="MakeChemfuelFromOrganics"]/ingredients/li/filter/exceptedThingDefs</xpath>
</Operation>

<Operation Class="PatchOperationRemove">
	<xpath>/Defs/RecipeDef[defName="MakeChemfuelFromOrganics"]/fixedIngredientFilter/exceptedThingDefs</xpath>
</Operation> -->

<Operation Class="PatchOperationSequence">
	<success>Always</success>
	<operations>
		<li Class="ModCheck.isModLoaded">
			<modName>VGP Garden Tools</modName>
			<yourMod>DacTweaks</yourMod>
			<customMessageSuccess>[DacTweaks] VGP Garden Tools detected. Patching VGP Garden Tools to allow compost from AnimalFeed</customMessageSuccess>
		</li>
		<li Class="ModCheck.loadOrder">
			<modName>VGP Garden Tools</modName>
			<yourMod>DacTweaks</yourMod>
			<errorOnFail>true</errorOnFail>
			<yourModFirst>false</yourModFirst>
			<customMessageFail>[DacTweaks] VGP Garden Tools must be loaded before DacTweaks</customMessageFail>
		</li>
		<li Class="PatchOperationReplace">
			<xpath>/Defs/RecipeDef[defName="MakeCompostStarter"]/ingredients/li[2]/filter/categories</xpath>
			<value>
				<categories>
			        <li>FoodRaw</li>
			        <li>AnimalFeed</li>
				</categories>
			</value>
		</li>
		<li Class="PatchOperationReplace">
			<xpath>/Defs/RecipeDef[defName="MakeCompostStarter"]/fixedIngredientFilter/categories</xpath>
			<value>
				<categories>
			        <li>FoodRaw</li>
			        <li>AnimalFeed</li>
				</categories>
			</value>
		</li>
	</operations>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>Defs/ThingDef[@Name="BaseArtilleryBuilding"]/building/turretBurstCooldownTime</xpath>
	<value>
		<turretBurstCooldownTime>24</turretBurstCooldownTime> <!-- Default 28 -->
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>Defs/ThingDef[@Name="BaseArtilleryBuilding"]/building/turretBurstWarmupTime</xpath>
	<value>
		<turretBurstWarmupTime>3.0</turretBurstWarmupTime> <!-- Default 4 -->
	</value>
</Operation>

<Operation Class="PatchOperationReplace">
	<xpath>Defs/ThingDef[defName="Artillery_Mortar"]/verbs/li/forcedMissRadius</xpath>
	<value>
		<forcedMissRadius>9.0</forcedMissRadius> <!-- Default 11 -->
	</value>
</Operation>

</Patch>
